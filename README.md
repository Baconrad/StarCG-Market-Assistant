# StarCG Market Extension

æ˜Ÿè© é­”åŠ›è³£å ´æœå°‹å·¥å…· - Monorepo æ¶æ§‹

## ğŸ“– å°ˆæ¡ˆç°¡ä»‹

é€™æ˜¯ä¸€å€‹ç”¨æ–¼æœå°‹æ˜Ÿè© é­”åŠ›éŠæˆ²è³£å ´çš„å·¥å…·ï¼ŒåŒ…å« Chrome æ“´å……åŠŸèƒ½å’Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€‚ä½¿ç”¨è€…å¯ä»¥å¿«é€Ÿæœå°‹å•†å“ã€æŸ¥çœ‹æ­·å²æˆäº¤åƒ¹æ ¼ã€è¿½è¹¤ç‰¹å®šå•†å“çš„åƒ¹æ ¼è®ŠåŒ–ï¼Œä¸¦åœ¨åƒ¹æ ¼ä¸‹é™æ™‚æ”¶åˆ°é€šçŸ¥ã€‚

## ğŸ—ï¸ å°ˆæ¡ˆçµæ§‹

```
.
â”œâ”€â”€ extension/          # Chrome æ“´å……åŠŸèƒ½ (WXT)
â”‚   â”œâ”€â”€ entrypoints/    # æ“´å……åŠŸèƒ½å…¥å£é»
â”‚   â”‚   â”œâ”€â”€ popup/      # å½ˆå‡ºè¦–çª—
â”‚   â”‚   â”œâ”€â”€ options/    # è¨­å®šé é¢
â”‚   â”‚   â””â”€â”€ background.ts # èƒŒæ™¯æœå‹™
â”‚   â”œâ”€â”€ components/     # Vue å…ƒä»¶
â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”œâ”€â”€ api.ts      # API è«‹æ±‚
â”‚   â”‚   â”œâ”€â”€ cache.ts    # å¿«å–æ©Ÿåˆ¶
â”‚   â”‚   â”œâ”€â”€ errors.ts   # éŒ¯èª¤è™•ç†
â”‚   â”‚   â””â”€â”€ storage.ts  # å„²å­˜ç®¡ç†
â”‚   â””â”€â”€ types/          # é¡å‹å®šç¾© (é‡æ–°å°å‡º shared)
â”‚
â”œâ”€â”€ web/                # ç¶²é æ‡‰ç”¨ (Vue + Vite)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/      # é é¢å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ components/ # Vue å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ stores/     # Pinia ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/      # å·¥å…·å‡½æ•¸
â”‚   â”‚   â””â”€â”€ types/      # é¡å‹å®šç¾© (é‡æ–°å°å‡º shared)
â”‚   â””â”€â”€ public/         # éœæ…‹è³‡æº
â”‚
â””â”€â”€ shared/             # å…±ç”¨è³‡æº
    â””â”€â”€ types/          # çµ±ä¸€é¡å‹å®šç¾©
        â”œâ”€â”€ market.ts   # å¸‚å ´ç›¸é—œé¡å‹
        â”œâ”€â”€ messages.ts # è¨Šæ¯é¡å‹
        â””â”€â”€ storage.ts  # å„²å­˜é¡å‹
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚

- Node.js >= 18
- pnpm >= 8

### å®‰è£ç›¸ä¾å¥—ä»¶

```bash
# å®‰è£æ‰€æœ‰å°ˆæ¡ˆçš„ç›¸ä¾å¥—ä»¶
pnpm install
```

### é–‹ç™¼æ¨¡å¼

#### Extension (æ“´å……åŠŸèƒ½)

```bash
cd extension
pnpm dev     # é–‹ç™¼æ¨¡å¼
pnpm build   # å»ºç½®æ­£å¼ç‰ˆ
pnpm compile # é¡å‹æª¢æŸ¥
```

#### Web (ç¶²é æ‡‰ç”¨)

```bash
cd web
pnpm dev     # é–‹ç™¼æ¨¡å¼
pnpm build   # å»ºç½®æ­£å¼ç‰ˆ
pnpm preview # é è¦½å»ºç½®çµæœ
```

### éƒ¨ç½²

```bash
cd web
pnpm build
pnpm deploy  # éƒ¨ç½²åˆ° GitHub Pages
```

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ” è³£å ´å•†å“æœå°‹
- æ”¯æ´å•†å“åç¨±å’Œæ”¤ä½åç¨±æœå°‹
- è‡ªå‹•è¼‰å…¥æ‰€æœ‰åˆ†é çµæœ
- å¿«å–æ©Ÿåˆ¶æ¸›å°‘é‡è¤‡è«‹æ±‚

### ğŸ“Š åƒ¹æ ¼æ’åºèˆ‡ç¯©é¸
- ä¾åƒ¹æ ¼å‡é™æ’åº
- ä¾å•†å“é¡å‹ï¼ˆé“å…·/å¯µç‰©ï¼‰ç¯©é¸
- ä¾äº¤æ˜“å–®ä½ï¼ˆé‡‘å¹£/é­”æ™¶ï¼‰ç¯©é¸
- æ”¯æ´é­”æ™¶æ¯”å€¼æ›ç®—

### ğŸ¯ æ‡¸è³è£å‚™å¿«é€ŸæŸ¥è©¢
- å…§å»ºæ‡¸è³è£å‚™å’Œå¯µç‰©æ¸…å–®
- ä¸€éµå¿«é€Ÿæœå°‹

### ğŸ“ˆ æ­·å²æˆäº¤åƒ¹æ ¼è¿½è¹¤
- æŸ¥çœ‹æœ€è¿‘æˆäº¤è¨˜éŒ„
- è¨ˆç®—æœ€ä½åƒ¹å’Œå¹³å‡åƒ¹
- æ”¯æ´è¿½è¹¤æ¸…å–®ç®¡ç†

### ğŸ”” åƒ¹æ ¼ä¸‹é™é€šçŸ¥
- è‡ªå‹•æ›´æ–°è¿½è¹¤å•†å“åƒ¹æ ¼
- åƒ¹æ ¼ä¸‹é™æ™‚æ¨æ’­é€šçŸ¥
- å¯è¨­å®šæ›´æ–°é »ç‡

### ğŸ—ºï¸ æ”¤ä½ä½ç½®é¡¯ç¤º
- é¡¯ç¤ºæ”¤ä½åœ¨åœ°åœ–ä¸Šçš„ä½ç½®
- æ”¯æ´åº§æ¨™æŸ¥è©¢

## ğŸ› ï¸ æŠ€è¡“æ£§

### Frontend
- **Framework**: Vue 3 (Composition API)
- **Build Tool**: Vite / WXT
- **Language**: TypeScript
- **State Management**: Pinia
- **Router**: Vue Router
- **Styling**: Tailwind CSS
- **UI Components**: shadcn-vue
- **Table**: TanStack Table

### Extension
- **Framework**: WXT (Web Extension Tools)
- **Manifest Version**: V3

### API & Data
- **API**: StarCG Member API
- **Storage**: Chrome Storage API / localStorage

## ğŸ“ ä¸»è¦æª”æ¡ˆèªªæ˜

### shared/types/
çµ±ä¸€çš„é¡å‹å®šç¾©ï¼Œè¢« extension å’Œ web å…±ç”¨ï¼š
- `market.ts` - å¸‚å ´è³‡æ–™ã€å•†å“ã€æ”¤ä½ç­‰é¡å‹
- `messages.ts` - æ“´å……åŠŸèƒ½èˆ‡ç¶²é é–“çš„è¨Šæ¯é¡å‹
- `storage.ts` - å„²å­˜è³‡æ–™çµæ§‹å’Œé è¨­å€¼

### extension/utils/
- `api.ts` - å°è£æ‰€æœ‰ API è«‹æ±‚é‚è¼¯
- `cache.ts` - API å¿«å–æœå‹™ï¼Œæ¸›å°‘é‡è¤‡è«‹æ±‚
- `errors.ts` - çµ±ä¸€éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- `storage.ts` - Chrome Storage æ“ä½œå°è£

### extension/entrypoints/background.ts
æ“´å……åŠŸèƒ½çš„èƒŒæ™¯æœå‹™ï¼Œè² è²¬ï¼š
- è™•ç†ä¾†è‡ªç¶²é çš„ API ä»£ç†è«‹æ±‚
- å®šæ™‚æ›´æ–°è¿½è¹¤å•†å“åƒ¹æ ¼
- ç™¼é€åƒ¹æ ¼ä¸‹é™é€šçŸ¥

## ğŸ”§ é…ç½®èªªæ˜

### ç’°å¢ƒè®Šæ•¸

#### Web (.env.development / .env.production)
```
VITE_EXTENSION_ID=your-extension-id
```

### Chrome æ“´å……åŠŸèƒ½ ID
éœ€è¦åœ¨ `web/src/stores/market.ts` å’Œ `web/src/utils/api.ts` ä¸­è¨­å®šæ­£ç¢ºçš„æ“´å……åŠŸèƒ½ IDã€‚

## ğŸ“ é–‹ç™¼æ³¨æ„äº‹é …

1. **é¡å‹å®šç¾©**: æ‰€æœ‰é¡å‹å®šç¾©çµ±ä¸€æ”¾åœ¨ `shared/types/`ï¼Œextension å’Œ web é€éé‡æ–°å°å‡ºä½¿ç”¨
2. **API å¿«å–**: å¸‚å ´æ•¸æ“šå¿«å– 5 åˆ†é˜ï¼Œæ­·å²è¨˜éŒ„å¿«å– 10 åˆ†é˜
3. **éŒ¯èª¤è™•ç†**: ä½¿ç”¨ `utils/errors.ts` ä¸­çš„çµ±ä¸€éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
4. **è·¨åŸŸå•é¡Œ**: ç¶²é ç«¯é€é Chrome Extension çš„ background script ä»£ç† API è«‹æ±‚

## ğŸ“œ License

MIT

## ğŸ‘¥ Author

Baconrad